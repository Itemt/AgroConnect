{% extends 'accounts/admin_base_tailadmin.html' %}
{% load static %}

{% block title %}Editar Pedido #{{ order.id }} - AgroConnect{% endblock %}

{% block page_title %}Editar Pedido #{{ order.id }}{% endblock %}

{% block admin_content %}
<div class="space-y-6">
    <!-- Header Section -->
    <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6">
        <div class="flex items-center justify-between">
            <div>
                <h1 class="text-2xl font-bold text-gray-900 dark:text-white">Editar Pedido #{{ order.id }}</h1>
                <p class="text-gray-600 dark:text-gray-400 mt-1">Modificar información del pedido</p>
            </div>
            <a href="{% url 'admin_order_list' %}" class="bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors">
                <i class="fas fa-arrow-left"></i>
                Volver a Pedidos
            </a>
        </div>
    </div>

    <!-- Form Section -->
    <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6">
        <form method="POST" class="space-y-6">
            {% csrf_token %}
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Estado -->
                <div>
                    <label for="estado" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Estado del Pedido</label>
                    <select id="estado" name="estado" class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-700 dark:text-white" required>
                        {% for value, label in status_choices %}
                            <option value="{{ value }}" {% if order.estado == value %}selected{% endif %}>{{ label }}</option>
                        {% endfor %}
                    </select>
                </div>

                <!-- Precio Total -->
                <div>
                    <label for="precio_total" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Precio Total</label>
                    <input type="number" id="precio_total" name="precio_total" value="{{ order.precio_total|default:'' }}" 
                           class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-700 dark:text-white" step="0.01" required>
                </div>

                <!-- Cantidad Acordada -->
                <div>
                    <label for="cantidad_acordada" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Cantidad Acordada</label>
                    <input type="number" id="cantidad_acordada" name="cantidad_acordada" value="{{ order.cantidad_acordada|default:'' }}" 
                           class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-700 dark:text-white" step="0.01" required>
                </div>

                <!-- Dirección de Entrega -->
                <div>
                    <label for="direccion_entrega" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Dirección de Entrega</label>
                    <input type="text" id="direccion_entrega" name="direccion_entrega" value="{{ order.direccion_entrega|default:'' }}" 
                           class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-700 dark:text-white">
                </div>
            </div>

            <!-- Notas del Comprador -->
            <div>
                <label for="notas_comprador" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Notas del Comprador</label>
                <textarea id="notas_comprador" name="notas_comprador" rows="3" 
                          class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-700 dark:text-white">{{ order.notas_comprador|default:'' }}</textarea>
            </div>

            <!-- Notas del Vendedor -->
            <div>
                <label for="notas_vendedor" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Notas del Vendedor</label>
                <textarea id="notas_vendedor" name="notas_vendedor" rows="3" 
                          class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-brand-500 focus:border-brand-500 dark:bg-gray-700 dark:text-white">{{ order.notas_vendedor|default:'' }}</textarea>
            </div>

            <!-- Action Buttons -->
            <div class="flex items-center justify-end gap-4 pt-6 border-t border-gray-200 dark:border-gray-700">
                <a href="{% url 'admin_order_list' %}" class="px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600 rounded-lg transition-colors">
                    Cancelar
                </a>
                <button type="submit" class="px-6 py-2 bg-brand-500 hover:bg-brand-600 text-white rounded-lg transition-colors">
                    Actualizar Pedido
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}