{% extends 'base.html' %}

{% block title %}{{ publication.cultivo.nombre_producto }}{% endblock %}

{% block content %}
    <div class="product-detail-container">
        <div class="product-detail-card">
            <h1>{{ publication.cultivo.nombre_producto }}</h1>
            
            <div class="detail-section">
                <h2>Información del Producto</h2>
                <p><strong>Precio:</strong> ${{ publication.precio_por_unidad }} por {{ publication.cultivo.unidad_medida }}</p>
                <p><strong>Cantidad Disponible:</strong> {{ publication.cantidad_disponible }} {{ publication.cultivo.unidad_medida }}</p>
                <p><strong>Fecha de Cosecha (aprox.):</strong> {{ publication.cultivo.fecha_disponibilidad }}</p>
            </div>

            <div class="detail-section">
                <h2>Información del Productor</h2>
                <p><strong>Nombre:</strong> {{ publication.cultivo.productor.first_name }} {{ publication.cultivo.productor.last_name }}</p>
                <p><strong>Ubicación:</strong> {{ publication.cultivo.productor.producer_profile.location }}</p>
                <p><strong>Sobre la Finca:</strong> {{ publication.cultivo.productor.producer_profile.farm_description }}</p>
            </div>

            <a href="{% url 'start_conversation' publication.id %}" class="btn-contact">Contactar al Productor</a>
            {% if user.is_authenticated and user.role == 'Comprador' and user != publication.cultivo.productor %}
                <a href="{% url 'create_order' publication.id %}" class="btn-buy">Hacer Pedido</a>
            {% endif %}
        </div>
    </div>
{% endblock %}
