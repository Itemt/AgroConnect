# AgroConnect üåæ

AgroConnect es una plataforma web desarrollada con Django que conecta directamente a productores agr√≠colas con compradores, eliminando intermediarios y facilitando un comercio m√°s justo y eficiente en Colombia.

## üöÄ Caracter√≠sticas Principales

### üë• Sistema de Usuarios Multi-Rol
- **Roles diferenciados:** Productores, Compradores y Administradores con funcionalidades espec√≠ficas.
- **Autenticaci√≥n segura:** Sistema de registro e inicio de sesi√≥n con validaci√≥n.
- **Perfiles detallados:** 
  - Informaci√≥n de contacto completa (tel√©fono, WhatsApp)
  - Ubicaci√≥n por departamento y ciudad de Colombia
  - Im√°genes de perfil personalizables
  - Informaci√≥n de negocio (para productores)
- **Dashboard personalizado** seg√∫n el rol del usuario.

### üè° Sistema de Gesti√≥n de Fincas
- **Gesti√≥n completa de fincas:**
  - Registro de fincas con informaci√≥n detallada
  - Ubicaci√≥n espec√≠fica (departamento/ciudad con dropdown din√°mico)
  - Caracter√≠sticas del suelo y tipo de riego
  - √Årea total, cultivable y ocupada
  - Certificaciones (org√°nica, BPA, otras)
- **Registro de productores con finca inicial:**
  - Al registrarse como productor, se crea autom√°ticamente su primera finca
  - Formulario unificado que incluye datos personales + finca
  - Mensaje informativo: "Si quieres agregar m√°s fincas, puedes hacerlo desde tu perfil"
- **Panel principal de gesti√≥n:**
  - "Mis Fincas" como punto central de gesti√≥n
  - Vista detallada de cada finca con cultivos asociados
  - CRUD completo para fincas
  - Estad√≠sticas de √°rea disponible vs ocupada

### üåæ Gesti√≥n de Inventario Orientada a Fincas
- **Cultivos asociados a fincas:**
  - Cada cultivo se asocia a una finca espec√≠fica
  - √Årea ocupada por cultivo en la finca
  - Validaci√≥n de √°rea disponible vs ocupada
- **Estados de cultivo:** 
  - Siembra ‚Üí Crecimiento ‚Üí Listo para Cosecha ‚Üí Cosechado
- **Dashboard del productor:**
  - Resumen de fincas y cultivos
  - Ingresos totales y pendientes
  - Estad√≠sticas de ventas por producto
  - Pedidos recientes y que requieren atenci√≥n
- **Publicaciones con origen de finca:**
  - Las publicaciones muestran la finca de origen
  - Filtros por finca en el marketplace
  - Trazabilidad completa desde finca hasta comprador

### üîî Sistema de Notificaciones en Tiempo Real
- **Notificaciones autom√°ticas:**
  - Nuevos pedidos para productores
  - Cambios de estado de pedidos para compradores
  - Confirmaciones de pago
  - Cancelaciones y actualizaciones
- **Panel de notificaciones:**
  - Bell icon con badge de notificaciones no le√≠das
  - Dropdown con notificaciones recientes
  - P√°gina dedicada con historial completo
  - Estad√≠sticas: total, no le√≠das, le√≠das
- **Gesti√≥n de notificaciones:**
  - Marcar como le√≠da individual
  - Marcar todas como le√≠das/no le√≠das
  - Filtros por categor√≠a (pedido, pago, sistema)
- **WebSockets:** Actualizaci√≥n en tiempo real con Django Channels

### üõí Marketplace y Carrito de Compras
- **Cat√°logo de productos din√°mico:**
  - Grid responsivo de productos con im√°genes
  - Badges de categor√≠a y precio
  - Vista detallada de cada publicaci√≥n con informaci√≥n de finca
- **B√∫squeda y filtros avanzados:**
  - B√∫squeda por texto (productos, productores, descripciones)
  - Filtro por categor√≠a
  - Filtro por rango de precio
  - Filtro por ubicaci√≥n (ciudad/regi√≥n)
  - Ordenamiento: m√°s reciente, precio menor/mayor, nombre A-Z
- **Carrito de compras funcional:**
  - A√±adir productos con validaci√≥n de cantidad m√≠nima
  - Modificar cantidades directamente
  - Eliminar art√≠culos
  - C√°lculo autom√°tico de totales
  - Resumen completo del pedido
- **Gesti√≥n de publicaciones:**
  - Crear publicaciones desde cultivos listos
  - Seleccionar finca de origen
  - Editar precio, cantidad, descripci√≥n e imagen
  - Estados: Activa, Vendida, Inactiva

### üì¶ Sistema de Pedidos Avanzado
- **Flujo completo de pedidos:**
  - Pendiente ‚Üí Confirmado ‚Üí En Preparaci√≥n ‚Üí Enviado ‚Üí En Tr√°nsito ‚Üí Entregado ‚Üí Completado
- **Gesti√≥n por roles:**
  - **Compradores:** 
    - Realizar pedidos desde el marketplace
    - Seguimiento de estado en tiempo real
    - Confirmar recepci√≥n de productos
    - Calificar vendedores despu√©s de la entrega
  - **Productores:** 
    - Confirmar o rechazar pedidos
    - Actualizar estados de env√≠o
    - Gestionar entregas
    - Ver historial completo de ventas
- **Funcionalidades especiales:**
  - Cancelaci√≥n de pedidos con devoluci√≥n autom√°tica de stock
  - Validaci√≥n de cantidades disponibles
  - C√°lculo autom√°tico de totales
  - Historial completo de todos los pedidos
- **Vista detallada de pedidos:**
  - Informaci√≥n del producto y vendedor/comprador
  - Estado actual y timeline de progreso
  - Botones de acci√≥n seg√∫n el estado y rol

### üí≥ Sistema de Pagos con ePayco
- **Integraci√≥n completa con ePayco:**
  - Pasarela de pagos oficial para Colombia
  - Procesamiento seguro de transacciones
  - Webhooks para confirmaci√≥n autom√°tica de pagos
- **M√©todos de pago soportados:**
  - üí≥ Tarjetas de Cr√©dito y D√©bito (Visa, MasterCard, AmEx)
  - üè¶ PSE (Transferencia bancaria en l√≠nea)
  - üíµ Efectivo (Baloto, Efecty, Gana, etc.)
- **Funcionalidades:**
  - Checkout seguro con formulario de ePayco
  - Referencias √∫nicas por transacci√≥n
  - Historial completo de pagos
  - Estados de pago en tiempo real
  - Validaci√≥n de montos m√≠nimos
  - Modo de prueba para desarrollo
- **Seguridad:**
  - No se almacenan datos sensibles de tarjetas
  - Todas las transacciones usan HTTPS
  - Verificaci√≥n de firmas en webhooks
  - Cumplimiento con est√°ndares PCI DSS

### ‚≠ê Sistema de Calificaciones y Rankings
- **Calificaciones multidimensionales:**
  - Calificaci√≥n general (1-5 estrellas)
  - Comunicaci√≥n
  - Puntualidad en la entrega
  - Calidad del producto
- **Rankings p√∫blicos:**
  - Top productores por calificaci√≥n
  - Top compradores por actividad
  - Estad√≠sticas de ventas totales
  - N√∫mero de calificaciones recibidas
- **Sistema de recomendaciones:**
  - Comentarios detallados
  - Indicador de "Recomendar√≠as al vendedor"
  - Historial de calificaciones dadas y recibidas
- **C√°lculo autom√°tico:** Promedios actualizados en tiempo real.

### üí¨ Sistema de Mensajer√≠a en Tiempo Real
- **Chat bidireccional:**
  - Comunicaci√≥n directa entre compradores y productores
  - Interfaz de chat moderna y responsiva
  - Mensajes organizados por conversaci√≥n
- **Conversaciones por publicaci√≥n:**
  - Cada producto tiene su hilo de conversaci√≥n
  - Contexto del producto siempre visible
  - Acceso r√°pido al producto desde el chat
- **Gesti√≥n de conversaciones:**
  - Lista de todas las conversaciones activas
  - Indicadores de mensajes nuevos
  - B√∫squeda de conversaciones
  - Historial completo de mensajes
- **WebSockets:** Actualizaci√≥n en tiempo real con Django Channels.

### üìä Analytics y Estad√≠sticas Detalladas

#### Dashboard del Productor:
- **M√©tricas financieras:**
  - Ingresos totales generados
  - Ingresos pendientes de cobro
  - Gr√°ficos de tendencias de ventas
- **An√°lisis de fincas:**
  - Resumen de todas las fincas
  - √Årea total vs cultivable vs ocupada
  - Cultivos por finca
- **An√°lisis de productos:**
  - Top 5 productos m√°s vendidos
  - Estad√≠sticas por categor√≠a
  - Inventario actual
- **An√°lisis de clientes:**
  - Top compradores frecuentes
  - Total de clientes √∫nicos
  - Patrones de compra
- **Gesti√≥n de pedidos:**
  - Pedidos pendientes de atenci√≥n
  - Pedidos en progreso
  - Historial completo
- **Reputaci√≥n:**
  - Calificaci√≥n promedio
  - Calificaciones recientes
  - Comentarios de compradores

#### Dashboard del Comprador:
- **Resumen de compras:**
  - Total gastado
  - N√∫mero de pedidos realizados
  - Pedidos activos
- **Productos favoritos:**
  - Productos m√°s comprados
  - Productores favoritos
- **Historial:**
  - Pedidos completados
  - Pedidos pendientes
  - Calificaciones dadas

### üó∫Ô∏è Sistema de Ubicaci√≥n para Colombia
- **Base de datos completa:**
  - 32 departamentos
  - M√°s de 1,100 municipios y ciudades
- **Selecci√≥n en cascada:**
  - Seleccionar departamento
  - Autom√°ticamente se cargan las ciudades de ese departamento
  - Implementado con AJAX para mejor UX
- **Filtros geogr√°ficos:**
  - Buscar productos por ubicaci√≥n
  - Ver productores cercanos

## üõ† Tecnolog√≠as Utilizadas

### Backend
- **Python 3.9+**
- **Django 4.2** - Framework web principal
- **Django Channels** - WebSockets para chat y notificaciones en tiempo real
- **Pillow** - Procesamiento de im√°genes
- **ePayco SDK** - Integraci√≥n con pasarela de pagos

### Frontend
- **HTML5 / CSS3** con sem√°ntica moderna
- **TailwindCSS** - Framework CSS con configuraci√≥n personalizada
- **CSS personalizado** - Variables CSS, gradientes y animaciones
- **JavaScript (Vanilla)** - Interactividad avanzada del lado del cliente
- **Font Awesome 6.4** - Iconograf√≠a completa
- **Google Fonts (Inter)** - Tipograf√≠a moderna y legible

### Base de Datos
- **PostgreSQL** - Producci√≥n
- **SQLite** - Desarrollo

### Deployment & Storage
- **Coolify** - Plataforma de deployment self-hosted
- **Digital Ocean** - Infraestructura (Droplets)
- **Docker** - Containerizaci√≥n en producci√≥n
- **Git** - Control de versiones
- **Cloudinary** - Almacenamiento de im√°genes en producci√≥n
- **WhiteNoise** - Servir archivos est√°ticos en producci√≥n

### Librer√≠as Python Principales
```
Django==4.2.16
channels==4.1.0
pillow==11.0.0
psycopg2-binary==2.9.10
faker==33.1.0
epaycosdk==3.3.2
django-cloudinary-storage==0.3.0
cloudinary==1.44.1
whitenoise==6.8.2
widget-tweaks==1.4.12
```

## üìã Instalaci√≥n y Configuraci√≥n

### Opci√≥n 1: Desarrollo Local

#### 1. Clonar el Repositorio
```bash
git clone https://github.com/Itemt/AgroConnect.git
cd AgroConnect
```

#### 2. Crear y Activar Entorno Virtual
```bash
# Crear el entorno virtual
python -m venv venv

# Activar en macOS/Linux
source venv/bin/activate

# Activar en Windows
venv\Scripts\activate
```

#### 3. Instalar Dependencias
```bash
pip install -r requirements.txt
```

#### 4. Configurar Variables de Entorno (Opcional)
Para desarrollo local, Django usar√° SQLite por defecto. Para PostgreSQL y otras configuraciones:
```bash
# Crear archivo .env en la ra√≠z del proyecto

# Base de Datos (opcional, si usas PostgreSQL localmente)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=agroconnect
POSTGRES_USER=tu_usuario
POSTGRES_PASSWORD=tu_contrase√±a

# Cloudinary (opcional, solo si quieres usar Cloudinary en desarrollo)
CLOUDINARY_CLOUD_NAME=tu_cloud_name
CLOUDINARY_API_KEY=tu_api_key
CLOUDINARY_API_SECRET=tu_api_secret

# ePayco (requerido para funcionalidad de pagos)
EPAYCO_PUBLIC_KEY=tu_public_key
EPAYCO_PRIVATE_KEY=tu_private_key
EPAYCO_TEST_MODE=True
EPAYCO_RESPONSE_URL=http://127.0.0.1:8000/payments/success/
EPAYCO_CONFIRMATION_URL=http://127.0.0.1:8000/payments/confirmation/
```

#### 5. Aplicar Migraciones
```bash
python manage.py migrate
```

#### 6. Crear Superusuario
```bash
python manage.py createsuperuser
```

#### 7. Generar Datos de Prueba (Opcional)
```bash
# Poblar con datos de ejemplo
python manage.py seed_data
```

#### 8. Ejecutar el Servidor
```bash
python manage.py runserver
```

La aplicaci√≥n estar√° disponible en `http://127.0.0.1:8000/`

### Opci√≥n 2: Deploy con Coolify en Digital Ocean (Producci√≥n)

#### Prerequisitos
- Droplet de Digital Ocean con Coolify instalado
- PostgreSQL database configurado (puede ser managed o en el mismo droplet)

#### Configuraci√≥n en Coolify

1. **Crear nuevo proyecto en Coolify:**
   - Accede a tu panel de Coolify
   - Click en "New Resource" ‚Üí "Application"
   - Selecciona "Public Repository" o "Private Repository"

2. **Conecta tu repositorio:**
   - URL del repositorio: `https://github.com/tu-usuario/AgroConnect.git`
   - Branch: `main`
   - Build Pack: Dockerfile (Coolify detectar√° el Dockerfile autom√°ticamente)

3. **Configura Variables de Entorno:**
   
   En la secci√≥n "Environment Variables" de tu aplicaci√≥n en Coolify:

   **Base de Datos (PostgreSQL):**
   ```
   POSTGRES_HOST=tu_host_postgres
   POSTGRES_PORT=5432
   POSTGRES_DB=agroconnect
   POSTGRES_USER=tu_usuario
   POSTGRES_PASSWORD=tu_password
   ```

   **Cloudinary (para im√°genes en producci√≥n):**
   ```
   CLOUDINARY_CLOUD_NAME=tu_cloud_name
   CLOUDINARY_API_KEY=tu_api_key
   CLOUDINARY_API_SECRET=tu_api_secret
   ```

   **ePayco (para pagos):**
   ```
   EPAYCO_PUBLIC_KEY=tu_public_key
   EPAYCO_PRIVATE_KEY=tu_private_key
   EPAYCO_TEST_MODE=False
   EPAYCO_RESPONSE_URL=https://tu-dominio.com/payments/success/
   EPAYCO_CONFIRMATION_URL=https://tu-dominio.com/payments/confirmation/
   ```

   **Configuraci√≥n Django:**
   ```
   DEBUG=False
   SECRET_KEY=tu_secret_key_super_segura_aqui
   ALLOWED_HOSTS=tu-dominio.com,www.tu-dominio.com
   ```

4. **Configurar dominio (opcional):**
   - En Coolify, ve a "Domains"
   - Agrega tu dominio personalizado
   - Coolify configurar√° SSL autom√°ticamente con Let's Encrypt

5. **Deploy:**
   - Click en "Deploy"
   - Coolify construir√° la imagen Docker y la desplegar√°
   - Tu app estar√° disponible en el dominio configurado

#### Crear Usuario Administrador en Producci√≥n

**Usando la terminal de Coolify:**
```bash
# En Coolify, ve a tu aplicaci√≥n ‚Üí "Terminal" y ejecuta:
python manage.py shell
```

Luego en el shell de Python:
```python
from accounts.models import User
admin = User.objects.create_superuser(
    username='admin',
    email='admin@agroconnect.com',
    password='tu_password_seguro',
    role='administrador',
    first_name='Admin',
    last_name='AgroConnect'
)
exit()
```

**Eliminar Usuario Administrador:**
```python
# En la terminal de Coolify:
python manage.py shell

from accounts.models import User
User.objects.filter(username='admin', role='administrador').delete()
exit()
```

#### Comandos √ötiles en Coolify

**Ver logs en tiempo real:**
- En Coolify, ve a tu aplicaci√≥n ‚Üí "Logs"
- O usa la terminal y ejecuta: `docker logs -f nombre_contenedor`

**Reiniciar la aplicaci√≥n:**
- Click en "Restart" en el panel de Coolify
- O redeploy: Click en "Deploy" nuevamente

**Ejecutar migraciones manualmente:**
```bash
# En la terminal de Coolify:
python manage.py migrate
```

**Recolectar archivos est√°ticos:**
```bash
# En la terminal de Coolify:
python manage.py collectstatic --noinput
```

#### Troubleshooting

**Si las im√°genes no cargan:**
1. Verifica que las variables de Cloudinary est√©n configuradas
2. Revisa los logs: `docker logs nombre_contenedor`
3. Aseg√∫rate que `DEFAULT_FILE_STORAGE` est√© configurado en `settings.py`

**Si la base de datos no conecta:**
1. Verifica las variables de entorno de PostgreSQL
2. Aseg√∫rate que el host de PostgreSQL sea accesible desde el contenedor
3. Si PostgreSQL est√° en el mismo droplet, usa la IP interna

**Si el deployment falla:**
1. Revisa los logs de build en Coolify
2. Verifica que el `Dockerfile` sea correcto
3. Aseg√∫rate que `requirements.txt` tenga todas las dependencias

**Configurar webhook de ePayco (IMPORTANTE):**
1. Ve al [dashboard de ePayco](https://dashboard.epayco.co/)
2. Ve a "Configuraci√≥n" ‚Üí "URLs de Confirmaci√≥n"
3. Agrega tu URL de confirmaci√≥n: `https://tu-dominio.com/payments/confirmation/`
4. Esta URL debe ser accesible p√∫blicamente para que ePayco env√≠e las confirmaciones de pago
5. Para probar localmente, puedes usar [ngrok](https://ngrok.com/) o [localtunnel](https://localtunnel.github.io/www/)

## üí≥ Configuraci√≥n Detallada de ePayco

### Obtener Credenciales

1. **Registrarse en ePayco:**
   - Ve a [ePayco](https://www.epayco.co/) y crea una cuenta
   - Completa el proceso de verificaci√≥n de tu negocio

2. **Obtener llaves de API:**
   - Accede al [dashboard de ePayco](https://dashboard.epayco.co/)
   - Ve a "Integraciones" en el men√∫ lateral
   - Encontrar√°s tus llaves:
     - **Public Key (P_CUST_ID_XXXXXXXX)**: Llave p√∫blica para el frontend
     - **Private Key**: Llave privada para el backend (¬°NO la compartas!)

3. **Configurar URLs de confirmaci√≥n:**
   - En el dashboard, ve a "Configuraci√≥n" ‚Üí "URLs de Confirmaci√≥n"
   - **URL de Respuesta:** `https://tu-dominio.com/payments/success/`
   - **URL de Confirmaci√≥n (Webhook):** `https://tu-dominio.com/payments/confirmation/`

### Modo de Prueba

Para desarrollo, ePayco ofrece un modo de prueba:
- Usa tus credenciales normales
- Activa `EPAYCO_TEST_MODE=True`
- Usa tarjetas de prueba:
  - **Visa:** 4575623182290326
  - **MasterCard:** 5254133511684471
  - **CVV:** 123
  - **Fecha:** Cualquier fecha futura
  - **Cuotas:** 1

### M√©todos de Pago Disponibles

- **Tarjetas de Cr√©dito:** Visa, MasterCard, American Express, Diners
- **PSE:** Transferencias bancarias en l√≠nea
- **Efectivo:** Baloto, Efecty, Gana, etc.

### Comisiones

ePayco cobra comisiones por transacci√≥n. Consulta las tarifas actuales en su sitio web.

## üóÇÔ∏è Estructura del Proyecto

```
AgroConnect/
‚îú‚îÄ‚îÄ accounts/           # Gesti√≥n de usuarios y perfiles
‚îÇ   ‚îú‚îÄ‚îÄ models.py      # User, ProducerProfile, BuyerProfile
‚îÇ   ‚îú‚îÄ‚îÄ views.py       # Autenticaci√≥n, registro, perfiles
‚îÇ   ‚îú‚îÄ‚îÄ forms.py       # Formularios de usuario
‚îÇ   ‚îî‚îÄ‚îÄ forms_farm.py  # Formularios extendidos con fincas
‚îú‚îÄ‚îÄ core/              # Funcionalidades compartidas
‚îÇ   ‚îú‚îÄ‚îÄ models.py      # Notification, Farm, BaseModel
‚îÇ   ‚îú‚îÄ‚îÄ views.py       # Notificaciones, APIs
‚îÇ   ‚îú‚îÄ‚îÄ views_farm.py  # CRUD de fincas
‚îÇ   ‚îú‚îÄ‚îÄ forms.py       # Formularios de fincas
‚îÇ   ‚îú‚îÄ‚îÄ consumers.py   # WebSocket para notificaciones
‚îÇ   ‚îú‚îÄ‚îÄ routing.py     # Rutas de WebSockets
‚îÇ   ‚îî‚îÄ‚îÄ colombia_locations.py  # Base de datos de ubicaciones
‚îú‚îÄ‚îÄ inventory/         # Gesti√≥n de cultivos (productores)
‚îÇ   ‚îú‚îÄ‚îÄ models.py      # Crop (con relaci√≥n a Farm)
‚îÇ   ‚îú‚îÄ‚îÄ views.py       # CRUD de cultivos, dashboard
‚îÇ   ‚îî‚îÄ‚îÄ forms.py       # Formularios de cultivos
‚îú‚îÄ‚îÄ marketplace/       # Marketplace y publicaciones
‚îÇ   ‚îú‚îÄ‚îÄ models.py      # Publication (con relaci√≥n a Farm)
‚îÇ   ‚îú‚îÄ‚îÄ views.py       # Listado, b√∫squeda, filtros
‚îÇ   ‚îî‚îÄ‚îÄ forms.py       # Formularios de publicaciones
‚îú‚îÄ‚îÄ cart/              # Carrito de compras
‚îÇ   ‚îú‚îÄ‚îÄ models.py      # Cart, CartItem
‚îÇ   ‚îî‚îÄ‚îÄ views.py       # Gesti√≥n del carrito
‚îú‚îÄ‚îÄ sales/             # Pedidos, mensajer√≠a y calificaciones
‚îÇ   ‚îú‚îÄ‚îÄ models.py      # Order, Conversation, Message, Rating
‚îÇ   ‚îú‚îÄ‚îÄ views.py       # Flujo de pedidos, calificaciones
‚îÇ   ‚îú‚îÄ‚îÄ consumers.py   # WebSocket handlers para chat
‚îÇ   ‚îî‚îÄ‚îÄ routing.py     # Rutas de WebSockets
‚îú‚îÄ‚îÄ payments/          # Sistema de pagos con ePayco
‚îÇ   ‚îú‚îÄ‚îÄ models.py      # Payment
‚îÇ   ‚îú‚îÄ‚îÄ views.py       # Checkout, confirmaciones, webhooks
‚îÇ   ‚îú‚îÄ‚îÄ epayco_service.py  # Servicio de integraci√≥n ePayco
‚îÇ   ‚îî‚îÄ‚îÄ README.md      # Documentaci√≥n espec√≠fica de pagos
‚îú‚îÄ‚îÄ templates/         # Plantillas HTML
‚îÇ   ‚îú‚îÄ‚îÄ base.html      # Template base con navegaci√≥n mejorada
‚îÇ   ‚îú‚îÄ‚îÄ index.html     # P√°gina de inicio renovada
‚îÇ   ‚îú‚îÄ‚îÄ accounts/      # Templates de autenticaci√≥n
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ register_producer.html  # Registro espec√≠fico de productores
‚îÇ   ‚îú‚îÄ‚îÄ core/          # Templates de notificaciones y fincas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ notifications.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ farm_list.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ farm_form.html
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ farm_detail.html
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ farm_confirm_delete.html
‚îÇ   ‚îú‚îÄ‚îÄ marketplace/   # Templates del marketplace
‚îÇ   ‚îî‚îÄ‚îÄ sales/         # Templates de pedidos y dashboards
‚îú‚îÄ‚îÄ static/            # Archivos est√°ticos (CSS, JS, im√°genes)
‚îÇ   ‚îú‚îÄ‚îÄ css/           # Estilos personalizados
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ custom.css # Sistema de dise√±o completo
‚îÇ   ‚îú‚îÄ‚îÄ js/            # JavaScript personalizado
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.js    # Funcionalidades principales
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ enhanced-ui.js # Interactividad mejorada
‚îÇ   ‚îî‚îÄ‚îÄ images/        # Im√°genes y assets
‚îú‚îÄ‚îÄ agroconnect/       # Configuraci√≥n del proyecto
‚îÇ   ‚îú‚îÄ‚îÄ settings.py    # Configuraci√≥n de Django
‚îÇ   ‚îú‚îÄ‚îÄ urls.py        # Rutas principales
‚îÇ   ‚îî‚îÄ‚îÄ asgi.py        # Configuraci√≥n ASGI para WebSockets
‚îú‚îÄ‚îÄ Dockerfile         # Configuraci√≥n de Docker
‚îú‚îÄ‚îÄ requirements.txt   # Dependencias Python
‚îî‚îÄ‚îÄ manage.py          # CLI de Django
```

## üîÑ Flujo de Trabajo T√≠pico

### Para un Productor:
1. **Registrarse** como productor con informaci√≥n de negocio, ubicaci√≥n y finca inicial
2. **Gestionar fincas** desde "Mis Fincas" (agregar m√°s fincas desde el perfil)
3. **Crear cultivos** asociados a fincas espec√≠ficas con √°rea ocupada
4. **Actualizar estado** de cultivos conforme crecen
5. **Publicar productos** cuando est√©n listos para venta (seleccionando finca de origen)
6. **Recibir notificaciones** de nuevos pedidos en tiempo real
7. **Recibir y gestionar pedidos** de compradores
8. **Actualizar estados de env√≠o** (preparaci√≥n ‚Üí enviado ‚Üí entregado)
9. **Recibir calificaciones** y construir reputaci√≥n
10. **Analizar m√©tricas** de ventas en el dashboard
11. **Comunicarse** con compradores v√≠a chat en tiempo real

### Para un Comprador:
1. **Registrarse** como comprador con informaci√≥n de contacto
2. **Explorar el marketplace** con filtros avanzados
3. **Ver detalles** de productos y perfiles de productores
4. **Ver informaci√≥n de fincas** de origen de los productos
5. **A√±adir productos** al carrito con cantidades deseadas
6. **Contactar productores** para negociar detalles
7. **Realizar pedido** desde el carrito
8. **Pagar con ePayco** usando tarjeta, PSE o efectivo
9. **Recibir notificaciones** de cambios de estado en tiempo real
10. **Seguir el estado** del pedido y pago en tiempo real
11. **Confirmar recepci√≥n** cuando el producto llegue
12. **Calificar al productor** y dejar comentarios
13. **Ver historial** de compras, pagos y gastos totales

### Para un Administrador:
1. **Gestionar usuarios** (crear, editar, eliminar)
2. **Moderar publicaciones** y contenido
3. **Revisar pedidos** y resolver disputas
4. **Monitorear estad√≠sticas** generales de la plataforma
5. **Gestionar categor√≠as** y configuraciones
6. **Ver notificaciones** del sistema

## üì± Caracter√≠sticas de UX/UI

### üé® Dise√±o Moderno y Atractivo
- ‚ú® **Sistema de dise√±o completo** con TailwindCSS personalizado
- üé≠ **Gradientes y efectos visuales** modernos
- üéØ **Tipograf√≠a Inter** para mejor legibilidad
- üåà **Paleta de colores expandida** (primary, secondary, accent)
- üí´ **Animaciones suaves** y micro-interacciones
- üé™ **Efectos hover** y transiciones elegantes

### üì± Experiencia de Usuario
- üì± **Totalmente responsivo** (m√≥vil, tablet, desktop)
- üé® **Interfaz intuitiva** con iconograf√≠a Font Awesome
- ‚ö° **Carga r√°pida** con optimizaci√≥n de assets
- üîî **Notificaciones visuales** para acciones del usuario
- üí¨ **Chat en tiempo real** sin necesidad de recargar
- üîç **B√∫squeda instant√°nea** con sugerencias
- ‚úÖ **Validaci√≥n de formularios** en tiempo real
- üñºÔ∏è **Optimizaci√≥n de im√°genes** autom√°tica
- üè° **Gesti√≥n visual de fincas** con mapas y estad√≠sticas

### üé® Componentes Mejorados
- üÉè **Tarjetas modernas** con sombras sofisticadas
- üîò **Botones con gradientes** y efectos ripple
- üìù **Formularios elegantes** con labels flotantes
- üß≠ **Navegaci√≥n mejorada** con backdrop blur
- üè† **Hero sections** con patrones decorativos
- üìä **Dashboards visuales** con estad√≠sticas atractivas
- üîî **Panel de notificaciones** con animaciones suaves
- üè° **Vistas de fincas** con informaci√≥n detallada

## üîê Seguridad

- üîí **Autenticaci√≥n robusta** con Django Auth
- üõ°Ô∏è **Protecci√≥n CSRF** en todos los formularios
- üö´ **Validaci√≥n de permisos** por rol
- üîë **Contrase√±as hasheadas** con algoritmos seguros
- üìù **Sanitizaci√≥n de inputs** para prevenir XSS
- üåê **Protecci√≥n contra SQL injection** con ORM de Django
- üîê **Variables de entorno** para datos sensibles
- üîî **Notificaciones seguras** con validaci√≥n de usuarios

## üé® Mejoras de Dise√±o Implementadas

### ‚ú® Renovaci√≥n Visual Completa
- **Sistema de CSS personalizado** con variables CSS y utilidades modernas
- **Configuraci√≥n TailwindCSS expandida** con colores, sombras y animaciones personalizadas
- **Tipograf√≠a Inter** para mejor legibilidad y aspecto profesional
- **Gradientes modernos** en botones, tarjetas y fondos
- **Efectos de profundidad** con sombras multicapa

### üé≠ Componentes Redise√±ados
- **Navegaci√≥n elegante** con logo con gradiente y men√∫ con backdrop blur
- **Tarjetas sofisticadas** con efectos hover 3D y transiciones suaves
- **Botones modernos** con gradientes, efectos ripple y estados de carga
- **Formularios mejorados** con labels flotantes e iconos descriptivos
- **Hero sections** con patrones decorativos y animaciones
- **Panel de notificaciones** con dise√±o moderno y animaciones

### üöÄ Interactividad Mejorada
- **JavaScript personalizado** para micro-interacciones
- **Animaciones de entrada** para elementos que aparecen en pantalla
- **Efectos hover** en todos los componentes interactivos
- **Navegaci√≥n inteligente** que se oculta al hacer scroll
- **Estados de carga** din√°micos para operaciones as√≠ncronas
- **WebSockets** para actualizaciones en tiempo real

### üì± Responsive Design Avanzado
- **Breakpoints optimizados** para todos los dispositivos
- **Navegaci√≥n m√≥vil** redise√±ada con mejor UX
- **Tarjetas adaptables** que se ajustan perfectamente
- **Tipograf√≠a escalable** que mantiene legibilidad en todos los tama√±os
- **Gesti√≥n de fincas** optimizada para m√≥viles

## üöÄ Funcionalidades Implementadas y Futuras

### ‚úÖ Implementadas
- [x] Sistema de pagos con ePayco (tarjetas, PSE, efectivo)
- [x] Chat en tiempo real con WebSockets
- [x] Sistema de calificaciones y rankings
- [x] Gesti√≥n completa de inventario orientada a fincas
- [x] Marketplace con filtros avanzados
- [x] Panel administrativo completo (CRUD)
- [x] Almacenamiento de im√°genes con Cloudinary
- [x] Sistema de ubicaciones de Colombia
- [x] Sistema de notificaciones en tiempo real
- [x] Gesti√≥n completa de fincas
- [x] Registro de productores con finca inicial
- [x] Trazabilidad desde finca hasta comprador

### üîú Pr√≥ximas Funcionalidades
- [ ] Notificaciones push y por email
- [ ] API REST con Django REST Framework
- [ ] Aplicaci√≥n m√≥vil nativa (React Native / Flutter)
- [ ] Sistema de log√≠stica y tracking GPS
- [ ] Certificaciones de productos org√°nicos
- [ ] Marketplace de insumos agr√≠colas
- [ ] Pron√≥sticos de precios con Machine Learning
- [ ] Sistema de subastas inversas
- [ ] Integraci√≥n con APIs clim√°ticas
- [ ] Programa de fidelizaci√≥n para compradores
- [ ] Sistema de cupones y descuentos
- [ ] Mapa interactivo de fincas
- [ ] Sistema de certificaciones por finca

## üìä Modelos de Datos Principales

### User (Django AbstractUser)
- Roles: productor, comprador, administrador
- Informaci√≥n de contacto y perfil

### Farm (Finca)
- Nombre, descripci√≥n, ubicaci√≥n (departamento/ciudad)
- √Årea total, cultivable y ocupada
- Tipo de suelo y riego
- Certificaciones (org√°nica, BPA, otras)
- Relaci√≥n con productor
- Estado activo/inactivo

### Crop (Cultivo)
- Nombre, categor√≠a, cantidad, unidad
- Estado: siembra ‚Üí crecimiento ‚Üí listo ‚Üí cosechado
- Ubicaci√≥n y fecha de disponibilidad
- Relaci√≥n con productor y finca
- √Årea ocupada en la finca

### Publication (Publicaci√≥n)
- Relaci√≥n con cultivo y finca
- Precio, cantidad disponible, cantidad m√≠nima
- Estado: Activa, Vendida, Inactiva
- Imagen y descripci√≥n

### Notification (Notificaci√≥n)
- Destinatario, t√≠tulo, mensaje
- Categor√≠a: pedido, pago, sistema
- Estado le√≠do/no le√≠do
- Relaci√≥n opcional con pedido/pago
- Timestamps de creaci√≥n y lectura

### Order (Pedido)
- Relaci√≥n con publicaci√≥n, comprador, vendedor
- Cantidad, precio total
- Estado: 7 estados diferentes
- Timestamps de cada cambio de estado

### Payment (Pago)
- Relaci√≥n con orden y usuario
- Referencia √∫nica de ePayco
- Monto y m√©todo de pago
- Estado: pending, approved, rejected, failed, cancelled
- Datos de respuesta de ePayco (JSON)

### Rating (Calificaci√≥n)
- Calificaci√≥n general + 3 aspectos espec√≠ficos
- Comentario y recomendaci√≥n
- Relaci√≥n con pedido

### Conversation y Message
- Conversaciones por publicaci√≥n
- Mensajes entre comprador y productor
- Timestamps y estado de lectura

## ü§ù Contribuci√≥n

Las contribuciones son bienvenidas. Para contribuir:

1. Fork el repositorio
2. Crea una rama para tu feature (`git checkout -b feature/AmazingFeature`)
3. Commit tus cambios (`git commit -m 'Add some AmazingFeature'`)
4. Push a la rama (`git push origin feature/AmazingFeature`)
5. Abre un Pull Request

## üìÑ Licencia

Este proyecto est√° bajo la Licencia MIT. Ver archivo `LICENSE` para m√°s detalles.

## üìß Contacto

Proyecto desarrollado por Cristian Ramos y Jhonnier Arguello - [GitHub](https://github.com/Itemt/AgroConnect)

---

**AgroConnect** - Conectando el campo con la ciudad üåæüèôÔ∏è