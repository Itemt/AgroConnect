# AgroConnect üåæ

AgroConnect es una plataforma web desarrollada con Django que conecta directamente a productores agr√≠colas con compradores, eliminando intermediarios y facilitando un comercio m√°s justo y eficiente en Colombia.

## üöÄ Caracter√≠sticas Principales

### üë• Sistema de Usuarios Multi-Rol
- **Roles diferenciados:** Productores, Compradores y Administradores con funcionalidades espec√≠ficas.
- **Autenticaci√≥n segura:** Sistema de registro e inicio de sesi√≥n con validaci√≥n.
- **Perfiles detallados:** 
  - Informaci√≥n de contacto completa (tel√©fono, WhatsApp)
  - Ubicaci√≥n por departamento y ciudad de Colombia
  - Im√°genes de perfil personalizables
  - Informaci√≥n de negocio (para productores)
- **Dashboard personalizado** seg√∫n el rol del usuario.

### üåæ Gesti√≥n de Inventario (Productores)
- **Gesti√≥n de cultivos completa:**
  - Registro de productos con nombre personalizado
  - 6 categor√≠as principales: Hortalizas, Frutas, Granos, Tub√©rculos, Arom√°ticas, Otros
  - Cantidad estimada y unidades de medida (kg, ton, und, etc.)
  - Ubicaci√≥n precisa (departamento y ciudad)
  - Im√°genes de los cultivos
- **Estados de cultivo:** 
  - Siembra ‚Üí Crecimiento ‚Üí Listo para Cosecha ‚Üí Cosechado
- **Dashboard del productor:**
  - Resumen de cultivos activos
  - Ingresos totales y pendientes
  - Estad√≠sticas de ventas por producto
  - Pedidos recientes y que requieren atenci√≥n
  - Top compradores y productos m√°s vendidos
- **Publicaciones:** Conversi√≥n directa de cultivos en publicaciones del marketplace.

### üõí Marketplace y Carrito de Compras
- **Cat√°logo de productos din√°mico:**
  - Grid responsivo de productos con im√°genes
  - Badges de categor√≠a y precio
  - Vista detallada de cada publicaci√≥n
- **B√∫squeda y filtros avanzados:**
  - B√∫squeda por texto (productos, productores, descripciones)
  - Filtro por categor√≠a
  - Filtro por rango de precio
  - Filtro por ubicaci√≥n (ciudad/regi√≥n)
  - Ordenamiento: m√°s reciente, precio menor/mayor, nombre A-Z
- **Carrito de compras funcional:**
  - A√±adir productos con validaci√≥n de cantidad m√≠nima
  - Modificar cantidades directamente
  - Eliminar art√≠culos
  - C√°lculo autom√°tico de totales
  - Resumen completo del pedido
- **Gesti√≥n de publicaciones:**
  - Crear publicaciones desde cultivos listos
  - Editar precio, cantidad, descripci√≥n e imagen
  - Eliminar publicaciones sin afectar el cultivo
  - Estados: Activa, Vendida, Inactiva

### üì¶ Sistema de Pedidos Avanzado
- **Flujo completo de pedidos:**
  - Pendiente ‚Üí Confirmado ‚Üí En Preparaci√≥n ‚Üí Enviado ‚Üí En Tr√°nsito ‚Üí Entregado ‚Üí Completado
- **Gesti√≥n por roles:**
  - **Compradores:** 
    - Realizar pedidos desde el marketplace
    - Seguimiento de estado en tiempo real
    - Confirmar recepci√≥n de productos
    - Calificar vendedores despu√©s de la entrega
  - **Productores:** 
    - Confirmar o rechazar pedidos
    - Actualizar estados de env√≠o
    - Gestionar entregas
    - Ver historial completo de ventas
- **Funcionalidades especiales:**
  - Cancelaci√≥n de pedidos con devoluci√≥n autom√°tica de stock
  - Validaci√≥n de cantidades disponibles
  - C√°lculo autom√°tico de totales
  - Historial completo de todos los pedidos
- **Vista detallada de pedidos:**
  - Informaci√≥n del producto y vendedor/comprador
  - Estado actual y timeline de progreso
  - Botones de acci√≥n seg√∫n el estado y rol

### ‚≠ê Sistema de Calificaciones y Rankings
- **Calificaciones multidimensionales:**
  - Calificaci√≥n general (1-5 estrellas)
  - Comunicaci√≥n
  - Puntualidad en la entrega
  - Calidad del producto
- **Rankings p√∫blicos:**
  - Top productores por calificaci√≥n
  - Top compradores por actividad
  - Estad√≠sticas de ventas totales
  - N√∫mero de calificaciones recibidas
- **Sistema de recomendaciones:**
  - Comentarios detallados
  - Indicador de "Recomendar√≠as al vendedor"
  - Historial de calificaciones dadas y recibidas
- **C√°lculo autom√°tico:** Promedios actualizados en tiempo real.

### üí¨ Sistema de Mensajer√≠a en Tiempo Real
- **Chat bidireccional:**
  - Comunicaci√≥n directa entre compradores y productores
  - Interfaz de chat moderna y responsiva
  - Mensajes organizados por conversaci√≥n
- **Conversaciones por publicaci√≥n:**
  - Cada producto tiene su hilo de conversaci√≥n
  - Contexto del producto siempre visible
  - Acceso r√°pido al producto desde el chat
- **Gesti√≥n de conversaciones:**
  - Lista de todas las conversaciones activas
  - Indicadores de mensajes nuevos
  - B√∫squeda de conversaciones
  - Historial completo de mensajes
- **WebSockets:** Actualizaci√≥n en tiempo real con Django Channels.

### üìä Analytics y Estad√≠sticas Detalladas

#### Dashboard del Productor:
- **M√©tricas financieras:**
  - Ingresos totales generados
  - Ingresos pendientes de cobro
  - Gr√°ficos de tendencias de ventas
- **An√°lisis de productos:**
  - Top 5 productos m√°s vendidos
  - Estad√≠sticas por categor√≠a
  - Inventario actual
- **An√°lisis de clientes:**
  - Top compradores frecuentes
  - Total de clientes √∫nicos
  - Patrones de compra
- **Gesti√≥n de pedidos:**
  - Pedidos pendientes de atenci√≥n
  - Pedidos en progreso
  - Historial completo
- **Reputaci√≥n:**
  - Calificaci√≥n promedio
  - Calificaciones recientes
  - Comentarios de compradores

#### Dashboard del Comprador:
- **Resumen de compras:**
  - Total gastado
  - N√∫mero de pedidos realizados
  - Pedidos activos
- **Productos favoritos:**
  - Productos m√°s comprados
  - Productores favoritos
- **Historial:**
  - Pedidos completados
  - Pedidos pendientes
  - Calificaciones dadas

### üó∫Ô∏è Sistema de Ubicaci√≥n para Colombia
- **Base de datos completa:**
  - 32 departamentos
  - M√°s de 1,100 municipios y ciudades
- **Selecci√≥n en cascada:**
  - Seleccionar departamento
  - Autom√°ticamente se cargan las ciudades de ese departamento
  - Implementado con AJAX para mejor UX
- **Filtros geogr√°ficos:**
  - Buscar productos por ubicaci√≥n
  - Ver productores cercanos

## üõ† Tecnolog√≠as Utilizadas

### Backend
- **Python 3.9+**
- **Django 4.2** - Framework web principal
- **Django Channels** - WebSockets para chat en tiempo real
- **Pillow** - Procesamiento de im√°genes

### Frontend
- **HTML5 / CSS3**
- **TailwindCSS** - Framework CSS moderno
- **JavaScript (Vanilla)** - Interactividad del lado del cliente
- **Font Awesome** - Iconograf√≠a

### Base de Datos
- **SQLite** - Desarrollo local
- **PostgreSQL** - Producci√≥n

### Deployment
- **Docker** - Containerizaci√≥n
- **Coolify** - Plataforma de despliegue
- **Git** - Control de versiones

### Librer√≠as Python Principales
```
Django==4.2.16
channels==4.1.0
pillow==11.0.0
psycopg2-binary==2.9.10
faker==33.1.0
```

## üìã Instalaci√≥n y Configuraci√≥n

### Opci√≥n 1: Desarrollo Local

#### 1. Clonar el Repositorio
```bash
git clone https://github.com/Itemt/AgroConnect.git
cd AgroConnect
```

#### 2. Crear y Activar Entorno Virtual
```bash
# Crear el entorno virtual
python -m venv venv

# Activar en macOS/Linux
source venv/bin/activate

# Activar en Windows
venv\Scripts\activate
```

#### 3. Instalar Dependencias
```bash
pip install -r requirements.txt
```

#### 4. Configurar Variables de Entorno (Opcional)
Para desarrollo local, Django usar√° SQLite por defecto. Para PostgreSQL, configura:
```bash
# Crear archivo .env en la ra√≠z del proyecto
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=agroconnect
POSTGRES_USER=tu_usuario
POSTGRES_PASSWORD=tu_contrase√±a
```

#### 5. Aplicar Migraciones
```bash
python manage.py migrate
```

#### 6. Crear Superusuario
```bash
python manage.py createsuperuser
```

#### 7. Generar Datos de Prueba (Opcional)
```bash
# Poblar con datos de ejemplo
python manage.py seed_data
```

#### 8. Ejecutar el Servidor
```bash
python manage.py runserver
```

La aplicaci√≥n estar√° disponible en `http://127.0.0.1:8000/`

### Opci√≥n 2: Docker (Producci√≥n)

#### 1. Construir la Imagen
```bash
docker build -t agroconnect:latest .
```

#### 2. Ejecutar con Docker Compose (recomendado)
```yaml
version: '3.8'

services:
  db:
    image: postgres:15
    environment:
      POSTGRES_DB: agroconnect
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: tu_password
    volumes:
      - postgres_data:/var/lib/postgresql/data

  web:
    image: agroconnect:latest
    environment:
      POSTGRES_HOST: db
      POSTGRES_PORT: 5432
      POSTGRES_DB: agroconnect
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: tu_password
    ports:
      - "8000:8000"
    depends_on:
      - db

volumes:
  postgres_data:
```

#### 3. Iniciar los Servicios
```bash
docker-compose up -d
```

## üóÇÔ∏è Estructura del Proyecto

```
AgroConnect/
‚îú‚îÄ‚îÄ accounts/           # Gesti√≥n de usuarios y perfiles
‚îÇ   ‚îú‚îÄ‚îÄ models.py      # User, ProducerProfile, BuyerProfile
‚îÇ   ‚îú‚îÄ‚îÄ views.py       # Autenticaci√≥n, registro, perfiles
‚îÇ   ‚îî‚îÄ‚îÄ forms.py       # Formularios de usuario
‚îú‚îÄ‚îÄ inventory/         # Gesti√≥n de cultivos (productores)
‚îÇ   ‚îú‚îÄ‚îÄ models.py      # Crop
‚îÇ   ‚îú‚îÄ‚îÄ views.py       # CRUD de cultivos, dashboard
‚îÇ   ‚îî‚îÄ‚îÄ forms.py       # Formularios de cultivos
‚îú‚îÄ‚îÄ marketplace/       # Marketplace y publicaciones
‚îÇ   ‚îú‚îÄ‚îÄ models.py      # Publication
‚îÇ   ‚îú‚îÄ‚îÄ views.py       # Listado, b√∫squeda, filtros
‚îÇ   ‚îî‚îÄ‚îÄ forms.py       # Formularios de publicaciones
‚îú‚îÄ‚îÄ cart/              # Carrito de compras
‚îÇ   ‚îú‚îÄ‚îÄ models.py      # Cart, CartItem
‚îÇ   ‚îî‚îÄ‚îÄ views.py       # Gesti√≥n del carrito
‚îú‚îÄ‚îÄ sales/             # Pedidos, mensajer√≠a y calificaciones
‚îÇ   ‚îú‚îÄ‚îÄ models.py      # Order, Conversation, Message, Rating
‚îÇ   ‚îú‚îÄ‚îÄ views.py       # Flujo de pedidos, calificaciones
‚îÇ   ‚îú‚îÄ‚îÄ consumers.py   # WebSocket handlers para chat
‚îÇ   ‚îî‚îÄ‚îÄ routing.py     # Rutas de WebSockets
‚îú‚îÄ‚îÄ core/              # Funcionalidades compartidas
‚îÇ   ‚îî‚îÄ‚îÄ colombia_locations.py  # Base de datos de ubicaciones
‚îú‚îÄ‚îÄ templates/         # Plantillas HTML
‚îú‚îÄ‚îÄ static/            # Archivos est√°ticos (CSS, JS, im√°genes)
‚îú‚îÄ‚îÄ agroconnect/       # Configuraci√≥n del proyecto
‚îÇ   ‚îú‚îÄ‚îÄ settings.py    # Configuraci√≥n de Django
‚îÇ   ‚îú‚îÄ‚îÄ urls.py        # Rutas principales
‚îÇ   ‚îî‚îÄ‚îÄ asgi.py        # Configuraci√≥n ASGI para WebSockets
‚îú‚îÄ‚îÄ Dockerfile         # Configuraci√≥n de Docker
‚îú‚îÄ‚îÄ requirements.txt   # Dependencias Python
‚îî‚îÄ‚îÄ manage.py          # CLI de Django
```

## üîÑ Flujo de Trabajo T√≠pico

### Para un Productor:
1. **Registrarse** como productor con informaci√≥n de negocio y ubicaci√≥n
2. **Crear cultivos** con detalles completos (nombre, categor√≠a, cantidad, ubicaci√≥n, imagen)
3. **Actualizar estado** de cultivos conforme crecen
4. **Publicar productos** cuando est√©n listos para venta
5. **Recibir y gestionar pedidos** de compradores
6. **Actualizar estados de env√≠o** (preparaci√≥n ‚Üí enviado ‚Üí entregado)
7. **Recibir calificaciones** y construir reputaci√≥n
8. **Analizar m√©tricas** de ventas en el dashboard
9. **Comunicarse** con compradores v√≠a chat en tiempo real

### Para un Comprador:
1. **Registrarse** como comprador con informaci√≥n de contacto
2. **Explorar el marketplace** con filtros avanzados
3. **Ver detalles** de productos y perfiles de productores
4. **A√±adir productos** al carrito con cantidades deseadas
5. **Contactar productores** para negociar detalles
6. **Realizar pedido** desde el carrito
7. **Seguir el estado** del pedido en tiempo real
8. **Confirmar recepci√≥n** cuando el producto llegue
9. **Calificar al productor** y dejar comentarios
10. **Ver historial** de compras y gastos totales

### Para un Administrador:
1. **Gestionar usuarios** (crear, editar, eliminar)
2. **Moderar publicaciones** y contenido
3. **Revisar pedidos** y resolver disputas
4. **Monitorear estad√≠sticas** generales de la plataforma
5. **Gestionar categor√≠as** y configuraciones

## üì± Caracter√≠sticas de UX/UI

- ‚ú® **Dise√±o moderno** con TailwindCSS
- üì± **Totalmente responsivo** (m√≥vil, tablet, desktop)
- üé® **Interfaz intuitiva** con iconograf√≠a clara
- ‚ö° **Carga r√°pida** con optimizaci√≥n de assets
- üîî **Notificaciones visuales** para acciones del usuario
- üåà **Esquema de colores consistente** (verde agr√≠cola)
- üí¨ **Chat en tiempo real** sin necesidad de recargar
- üîç **B√∫squeda instant√°nea** con sugerencias
- ‚úÖ **Validaci√≥n de formularios** en tiempo real
- üñºÔ∏è **Optimizaci√≥n de im√°genes** autom√°tica

## üîê Seguridad

- üîí **Autenticaci√≥n robusta** con Django Auth
- üõ°Ô∏è **Protecci√≥n CSRF** en todos los formularios
- üö´ **Validaci√≥n de permisos** por rol
- üîë **Contrase√±as hasheadas** con algoritmos seguros
- üìù **Sanitizaci√≥n de inputs** para prevenir XSS
- üåê **Protecci√≥n contra SQL injection** con ORM de Django
- üîê **Variables de entorno** para datos sensibles

## üöÄ Pr√≥ximas Funcionalidades

- [ ] Sistema de pagos integrado (Mercado Pago, PSE)
- [ ] Notificaciones push y por email
- [ ] API REST con Django REST Framework
- [ ] Aplicaci√≥n m√≥vil nativa (React Native)
- [ ] Sistema de log√≠stica y tracking GPS
- [ ] Certificaciones de productos org√°nicos
- [ ] Marketplace de insumos agr√≠colas
- [ ] Pron√≥sticos de precios con ML
- [ ] Sistema de subastas inversas
- [ ] Integraci√≥n con APIs clim√°ticas

## üìä Modelos de Datos Principales

### User (Django AbstractUser)
- Roles: productor, comprador, administrador
- Informaci√≥n de contacto y perfil

### Crop (Cultivo)
- Nombre, categor√≠a, cantidad, unidad
- Estado: siembra ‚Üí crecimiento ‚Üí listo ‚Üí cosechado
- Ubicaci√≥n y fecha de disponibilidad
- Relaci√≥n con productor

### Publication (Publicaci√≥n)
- Relaci√≥n con cultivo
- Precio, cantidad disponible, cantidad m√≠nima
- Estado: Activa, Vendida, Inactiva
- Imagen y descripci√≥n

### Order (Pedido)
- Relaci√≥n con publicaci√≥n, comprador, vendedor
- Cantidad, precio total
- Estado: 7 estados diferentes
- Timestamps de cada cambio de estado

### Rating (Calificaci√≥n)
- Calificaci√≥n general + 3 aspectos espec√≠ficos
- Comentario y recomendaci√≥n
- Relaci√≥n con pedido

### Conversation y Message
- Conversaciones por publicaci√≥n
- Mensajes entre comprador y productor
- Timestamps y estado de lectura

## ü§ù Contribuci√≥n

Las contribuciones son bienvenidas. Para contribuir:

1. Fork el repositorio
2. Crea una rama para tu feature (`git checkout -b feature/AmazingFeature`)
3. Commit tus cambios (`git commit -m 'Add some AmazingFeature'`)
4. Push a la rama (`git push origin feature/AmazingFeature`)
5. Abre un Pull Request

## üìÑ Licencia

Este proyecto est√° bajo la Licencia MIT. Ver archivo `LICENSE` para m√°s detalles.

## üìß Contacto

Proyecto desarrollado por Cristian Ramos y Jhonnier Arguello - [GitHub](https://github.com/Itemt/AgroConnect)

---

**AgroConnect** - Conectando el campo con la ciudad üåæüèôÔ∏è
